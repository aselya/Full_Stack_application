<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <head>
    <meta charset="utf-8">

    <title>Project Management</title>

    <link href="https://fonts.googleapis.com/css?family=Faster+One" rel="stylesheet">
    <link rel="stylesheet" href="projectMain1.css">
  </head>

  <div class="horMenu">
    <ul class="horMenuUL">
  <li class="horMenuLi"><a href="homePage.html">Home Page</a></li>
  <li class="horMenuLi"><a href="https://aqueous-depths-93796.herokuapp.com/">Issue Managment</a></li>
  <li class="horMenuLi"><a href="https://friendlychat-1f1b0.firebaseapp.com/">Communication Tool</a></li>


</ul>
  </div>
  <body>



<h2>Current Active Projects</h2>








<p id="demo"></p>


<section id = "mySection">

</section>


<section >
          <article class="newProjectLink">
          <a class="newProjectHref" href="http://as-front-end3.herokuapp.com/iframeTest.html">Create a New Project</a>
          </article>
        </section>




  <iframe  class="iframeMain" src="https://friendlychat-1f1b0.firebaseapp.com/" name="iframe_a"></iframe>









    <script>

var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
var myObj;
	var test = '  '


    if (this.readyState == 4 && this.status == 200) {
        myObj = JSON.parse(this.responseText);
        for (var i = 0; i < myObj.length ; i++) {

 var div1 = document.createElement("div");
 div1.className = 'div1';
var para = document.createElement("P");
var para2 = document.createElement("P");
var para3 = document.createElement("P");


var divId = myObj[i].id;
div1.className = "projectDiv";
        div1.id = divId;

       //para.className = divId;
       // para.id = divId;



       var pElementId = myObj[i].id;
       para3.className = pElementId;
       para3.id = pElementId;

       // myPara3.id = pElementId;


    var t = document.createTextNode("This is the project name: " + myObj[i].projectname);

//document.getElementById(pElementId).innerHTML="<a href= '/"+ pElementId +"'> Requirements </a>"


    var t2 =  document.createTextNode("This is the createname value: " + myObj[i].createuser);


   // para.appendChild(t);
   // para.appendChild(t2);




    para.appendChild(t);

    para3.innerHTML += myObj[i].projectname + "<br>"   +"<a href='"+myObj[i].projectname+"'>Go To Project</a>" ;


   // para3.innerHTML="<a href= '/"+ pElementId +"'>go to project</a>"


    div1.appendChild(para);

    para2.appendChild(t2);

    div1.appendChild(para2);
    div1.appendChild(para3);

    //document.body.appendChild(para);
    //document.body.appendChild(para2);
    //document.body.appendChild(div1);


    document.getElementById("mySection").appendChild(div1);





  /*

       test = test + "user: "+ myObj[i].id +" project name: " + myObj[i].projectname + " createuser:" + myObj[i].createuser;
    document.getElementById("demo").innerHTML = test + " x " + myObj[i].projectname;
    */



// var myH2 =  document.createElement('h2');
 //var myPara1 =  document.getElementById("demo").createElement('p');


//myH2.textContent = " project name: " + myObj[i].projectname;
//myPara1.textContent = 'Project members: ' + myObj[i].createuser;

     // document.appendChild(myH2);
        // document.getElementById("demo").appendChild(myPara1);

}

/*
  <?xml version="1.0" encoding="utf-8"?>
<string xmlns="https://ateam-pmb.herokuapp.com/pm/project/all">{"id":4,"projectname":"Project 3","createuser":["test","of","array"]}</string>

  */

    }



};
xmlhttp.open("GET", "https://as-front-end3.herokuapp.com/pm/project/all", true);
xmlhttp.send();



/*
var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance
xmlhttp.open("POST", "https://ateam-pmb.herokuapp.com/pm/project/");
xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
xmlhttp.send(JSON.stringify({"id":7,"projectname":"Test","createuser":5}));

*/


    </script>
  </body>
</html>
